# booster-um
Booster UKI Manager - Simple bash script to manage UKI files generated by booster and systemd-ukify.
The script can only be used on Arch Linux.

## Dependencies:
 * Required:
   * booster - Generate initramfs
   * go-yq - Parse booster and booster-um configs
   * system-ukify - Generate UKI files
   * util-linux - Miscellaneous system utilities for Linux
 * Optional:
   * sbctl - Sign UKI files
   * efibootmgr - Create EFI entries

## Default configuration
* booster-um by default:
  * Detects `XBOOTLDR` partition
  * Signs generated UKI files with sbctl **if installed**
  * Uses default splash `/usr/share/systemd/bootctl/splash-arch.bmp`
  * Copies the current cmdline if `/etc/kernel/cmdline` does not exist
  * Uses default configuration if `/etc/booster-um.yaml` config **is not valid**.
  * Removes vmlinuz-* and booster-* leftovers in /boot dir (microcode image will not be deleted)
  * Removes known EFI entries (Example: `\EFI\LINUX\ARCH-LINUX.EFI`) **if efibootmgr is installed**.
  * Will not create separate fallback images if `universal` flag is enabled in `/etc/booster.yaml` config
  * Will not generate EFI entries or fallback UKI files, by default. EFI entries and fallback UKI files are treated as leftovers.

* booster-um libalpm hooks by default:
  * Remove UKI file from ESP and sbctl database on kernel removal
  * Regenerate UKIs for all installed kernels when booster, microcode, dkms or firmware files are installed, updated, or removed
  * Will not sign generated UKI files on microcode, extramodules (nvidia, nvidia-lts etc.) and kernel updates, sbctl hook will do that
  * Will sign newly created UKI files if they do not exists in the sbctl database. You don't need to manually add UKI files in the sbctl database.

* Default `booster -G` output and `/boot`|`/efi` content
  * <details>
    <summary>Generating UKI for all kernels</summary>

    ![generation](https://github.com/Zile995/booster-um/assets/32335484/77ef01ee-a044-4f53-964a-b4748579d43c)

    </details>
  * <details>
    <summary>/boot and /efi content</summary>
    
    ![path](https://github.com/Zile995/booster-um/assets/32335484/ef21face-a364-4cee-b4d2-60e5a60187be)

    </details>
